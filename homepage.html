<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>BNK 부산은행 | Busan Connect – Global Community & Dongbaekjeon Rewards</title>
  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Fonts: Noto Sans KR + Inter -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800;900&family=Noto+Sans+KR:wght@400;500;700;900&display=swap" rel="stylesheet" />
  <style>
    :root {
      color-scheme: light dark;
    }
    body { font-family: 'Noto Sans KR', 'Inter', system-ui, -apple-system, Segoe UI, Roboto, 'Apple SD Gothic Neo', sans-serif; background:#f6f7fb; }
    .modal{ display:none; }
    .scroll-hidden::-webkit-scrollbar{ display:none; }
  </style>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            // BNK 스타일 팔레트 (비공식 톤)
            'bnk-red': '#C8132F',
            'bnk-deep': '#8A0E22',
            'bnk-ink': '#0E1116',
            'bnk-gray': '#eef0f4',
            'busan-blue': '#0B6BB8',
            'busan-orange': '#F76B15',
            'accent-green': '#17A34A'
          },
          boxShadow: {
            brand: '0 10px 25px -5px rgba(200,19,47,0.25), 0 8px 10px -6px rgba(200,19,47,0.3)'
          },
          borderRadius: {
            brand: '1.25rem'
          }
        }
      }
    }
  </script>
</head>
<body class="min-h-screen text-bnk-ink/90">
  <!-- Top compliance ribbon -->
  <div class="bg-gradient-to-r from-bnk-red to-bnk-deep text-white text-xs sm:text-sm">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-2 flex items-center justify-between">
      <div class="flex items-center gap-2">
        <span class="inline-flex h-5 w-5 items-center justify-center rounded-full bg-white/15 backdrop-blur-sm">🏦</span>
        <span class="font-semibold">BNK 부산은행 제공 · Busan Connect 베타</span>
      </div>
      <span class="hidden md:inline opacity-85">개인정보는 암호화되어 전송됩니다. 카드 연동 시 본인인증이 필요합니다.</span>
    </div>
  </div>

  <!-- Header / Navigation -->
  <header class="bg-white/90 backdrop-blur supports-[backdrop-filter]:bg-white/70 shadow-sm sticky top-0 z-40">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="h-16 flex items-center justify-between">
        <!-- Brand -->
        <a href="homepage.html" class="group flex items-center gap-3">
        <div class="h-9 w-9 rounded-2xl bg-gradient-to-br from-bnk-red to-bnk-deep text-white grid place-items-center shadow-brand">
          BNK
        </div>
        <div class="leading-tight">
          <div class="text-lg sm:text-xl font-extrabold tracking-tight text-bnk-ink group-hover:text-bnk-red transition">
            Busan Connect
          </div>
          <div class="text-[10px] sm:text-[11px] text-bnk-ink/60 -mt-0.5">
            Global Traveler · Student Hub
          </div>
        </div>
        </a>  

        <!-- Desktop Nav -->
        <nav class="hidden md:flex items-center gap-1">
          <a class="px-3 py-2 rounded-xl text-sm font-medium hover:bg-bnk-gray hover:text-bnk-ink transition" href="#">홈</a>
          <a class="px-3 py-2 rounded-xl text-sm font-medium hover:bg-bnk-gray hover:text-bnk-ink transition" href="#">포럼</a>
          <a class="px-3 py-2 rounded-xl text-sm font-medium hover:bg-bnk-gray hover:text-bnk-ink transition" href="#">동행/모임</a>
          <a class="px-3 py-2 rounded-xl text-sm font-medium hover:bg-bnk-gray hover:text-bnk-ink transition" href="#">여행 팁</a>
          <!-- <button id="rewards-nav-btn" class="px-3 py-2 rounded-xl text-sm font-semibold text-bnk-red hover:bg-bnk-red/10 transition flex items-center"><span class="mr-1">🎁</span>리워드/스탬프</button> -->
          <button id="rewards-nav-btn" class="px-3 py-2 rounded-xl text-sm font-semibold text-bnk-red hover:bg-bnk-red/10 transition" onclick="window.location.href='rewards.html'">🎁 리워드/스탬프</button>
          <span class="mx-2 h-6 w-px bg-neutral-200"></span>
          <button id="auth-button" class="px-4 py-2 rounded-xl text-sm font-semibold text-white bg-bnk-red hover:bg-bnk-deep shadow-brand transition" onclick="handleAuthClick()">로그인</button>
          <div id="profile-avatar" class="hidden w-10 h-10 rounded-full bg-bnk-red text-white font-bold text-xs items-center justify-center cursor-pointer border-2 border-transparent hover:border-busan-blue/60 transition" onclick="showProfile()">MY</div>
        </nav>

        <!-- Mobile -->
        <button id="mobile-menu-button" aria-label="메뉴 열기" class="md:hidden inline-flex p-2 rounded-lg hover:bg-bnk-gray">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/></svg>
        </button>
      </div>
    </div>

    <!-- Mobile sheet -->
    <div id="mobile-menu" class="hidden md:hidden border-t border-neutral-100 bg-white">
      <div class="px-4 py-3 space-y-2">
        <a class="block px-3 py-2 rounded-xl text-sm hover:bg-bnk-gray" href="#">홈</a>
        <a class="block px-3 py-2 rounded-xl text-sm hover:bg-bnk-gray" href="#">포럼</a>
        <a class="block px-3 py-2 rounded-xl text-sm hover:bg-bnk-gray" href="#">동행/모임</a>
        <a class="block px-3 py-2 rounded-xl text-sm hover:bg-bnk-gray" href="#">여행 팁</a>
        <button class="w-full text-left px-3 py-2 rounded-xl text-sm font-semibold text-bnk-red hover:bg-bnk-red/10" onclick="handleRewardsClick()">🎁 리워드/스탬프</button>
        <button class="w-full px-3 py-2 rounded-xl text-sm font-semibold bg-bnk-red text-white" onclick="handleAuthClick()">로그인</button>
      </div>
    </div>
  </header>

  <!-- Main -->
  <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <div class="grid grid-cols-1 lg:grid-cols-12 gap-8">
      <!-- Left rail -->
      <aside class="hidden lg:block lg:col-span-3">
        <div class="sticky top-24 space-y-6">
          <div class="bg-white rounded-brand p-6 shadow-sm border border-neutral-100">
            <h3 class="text-lg font-bold">함께 즐기는 부산</h3>
            <p class="text-sm text-neutral-600 mt-1 mb-4">여행을 더 풍요롭게 만들 친구를 찾아보세요!</p>
            <button class="w-full py-2.5 rounded-xl bg-busan-blue text-white font-semibold hover:brightness-110 transition mb-2">✨ 동행 찾기</button>
            <button class="w-full py-2.5 rounded-xl bg-bnk-red text-white font-semibold hover:bg-bnk-deep transition" onclick="handlePremiumFeatureClick()">새 모임 만들기 & 정산</button>
            <p class="text-[11px] text-neutral-500 mt-3">정산·리워드는 동백전 선불카드 연동 시 이용 가능</p>
          </div>

          <div class="bg-white rounded-brand p-6 shadow-sm border border-neutral-100">
            <h3 class="text-lg font-bold">📚 유학생 지원</h3>
            <ul class="mt-3 space-y-2 text-sm">
              <li><a href="#" class="text-busan-blue hover:underline">부산대/부경대 캠퍼스 가이드</a></li>
              <li><a href="#" class="text-busan-blue hover:underline">외국인등록증(ARC) 발급 가이드</a></li>
            </ul>
          </div>
        </div>
      </aside>

      <!-- Feed -->
      <section id="main-content-feed" class="lg:col-span-9 xl:col-span-6 space-y-6">
        <!-- Search / filter -->
        <div class="flex flex-col sm:flex-row items-stretch gap-3">
          <div class="relative flex-1">
            <input class="w-full py-3 pl-12 pr-4 rounded-xl border border-neutral-200 bg-white shadow-sm focus:ring-2 focus:ring-bnk-red/30 focus:border-bnk-red outline-none" placeholder="포럼에서 검색: 해운대, 맛집, 유학생…"/>
            <svg class="absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-neutral-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
          </div>
          <button class="px-4 py-3 rounded-xl bg-white border border-neutral-200 shadow-sm text-sm hover:bg-neutral-50 flex items-center gap-2">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 3H2l8 9.46V19l4 2v-8.54L22 3z"/></svg>
            필터
          </button>
        </div>

        <!-- Tabs -->
        <div id="tab-navigation" class="flex gap-4 border-b border-neutral-200">
          <button class="pb-3 font-semibold text-bnk-red border-b-2 border-bnk-red">전체 피드</button>
          <button class="pb-3 font-medium text-neutral-500 hover:text-bnk-red border-b-2 border-transparent hover:border-bnk-red">동행/모임</button>
          <button class="pb-3 font-medium text-neutral-500 hover:text-bnk-red border-b-2 border-transparent hover:border-bnk-red">유학생 전용</button>
        </div>

        <!-- Post Card 1 -->
        <article class="bg-white rounded-brand p-5 shadow-sm border border-neutral-100">
          <div class="flex items-start justify-between mb-3">
            <div class="flex items-center">
              <div class="h-10 w-10 rounded-full bg-bnk-red text-white grid place-items-center font-semibold mr-3">AM</div>
              <div>
                <p class="font-semibold">Amy Miller (미국)</p>
                <p class="text-xs text-neutral-500">1시간 전 · #해운대 #동행</p>
              </div>
            </div>
            <span class="px-3 py-1 rounded-full text-xs font-bold bg-bnk-red/10 text-bnk-red">동행 찾기</span>
          </div>
          <h2 class="text-xl font-bold leading-snug mb-2">이번 주 토요일 해운대 블루라인파크 같이 가요! 🚂</h2>
          <p class="text-neutral-700 mb-4">혼자 스카이캡슐 타려는데 같이 탈 분 구합니다. 토요일 오전 미포정거장 가능하신 분 댓글 주세요!</p>
          <div class="flex items-center justify-between text-sm text-neutral-600">
            <div class="flex gap-4">
              <button class="hover:text-bnk-red">32 댓글</button>
              <button class="hover:text-bnk-red">14 공감</button>
            </div>
            <a class="text-busan-blue hover:underline" href="#">자세히 보기 →</a>
          </div>
        </article>

        <!-- Post Card 2 -->
        <article class="bg-white rounded-brand p-5 shadow-sm border border-neutral-100 border-l-4 border-l-busan-blue/80">
          <div class="flex items-start justify-between mb-3">
            <div class="flex items-center">
              <div class="h-10 w-10 rounded-full bg-busan-blue text-white grid place-items-center text-[11px] font-bold mr-3">STU</div>
              <div>
                <p class="font-semibold">Lin Wei (중국)</p>
                <p class="text-xs text-neutral-500">4시간 전 · #캠퍼스생활 #질문</p>
              </div>
            </div>
            <span class="px-3 py-1 rounded-full text-xs font-bold bg-busan-blue text-white">유학생</span>
          </div>
          <h2 class="text-xl font-bold leading-snug mb-2">부산대 근처 가성비 좋은 원룸 팁이 있나요?</h2>
          <p class="text-neutral-700 mb-4">이번 학기 교환학생입니다. 월세 30–40만원대 찾는 중인데 선배 유학생분들 조언 부탁드려요.</p>
          <div class="flex items-center justify-between text-sm text-neutral-600">
            <div class="flex gap-4">
              <span>12 댓글</span>
              <span class="text-neutral-700">학교: PNU</span>
            </div>
            <a class="text-busan-blue hover:underline" href="#">자세히 보기 →</a>
          </div>
        </article>
      </section>

      <!-- Right rail -->
      <aside class="hidden xl:block xl:col-span-3">
        <div class="sticky top-24 space-y-6">
          <!-- Gourmet Busan (Mock) -->
          <div class="bg-white rounded-brand p-6 shadow-sm border border-neutral-100">
            <h3 class="text-lg font-bold flex items-center text-bnk-ink">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 text-busan-orange" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/><path d="M15 9l-3 3-3-3"/><path d="M12 17v-5"/></svg>
              고메부산 추천 (BNK 제휴)
            </h3>
            <p class="text-sm text-neutral-600 mt-1 mb-4">동백전 제휴 핫플 방문 시 스탬프 자동 적립</p>

            <div class="relative border-b border-neutral-100 pb-3 mb-3">
              <span class="absolute right-0 -top-2 text-[11px] bg-busan-orange text-white px-2 py-0.5 rounded-bl-lg font-bold">스탬프 가능 🎁</span>
              <a href="#" class="block font-semibold hover:text-bnk-red">1. The Bay 101 Fish & Chips</a>
              <p class="text-xs text-neutral-500 mt-1">#해운대 #핫플 · 평점 4.5/5</p>
            </div>

            <div class="border-b border-neutral-100 pb-3 mb-3">
              <a href="#" class="block font-semibold hover:text-bnk-red">2. 밀면 전문점 (Traditional Milmyeon)</a>
              <p class="text-xs text-neutral-500 mt-1">#부산맛집 #가성비 · 평점 4.2/5</p>
            </div>

            <!-- <button class="w-full py-2 rounded-xl border border-bnk-red text-bnk-red font-semibold hover:bg-bnk-red hover:text-white transition">고메부산 전체보기 →</button> -->
            <button class="w-full py-2 rounded-xl border border-bnk-red text-bnk-red font-semibold hover:bg-bnk-red hover:text-white transition" onclick="window.location.href='gourmet.html'">
              고메부산 전체보기 →
            </button>
          
          </div>

          <!-- Dongbaekjeon Kiosk (Mock) -->
          <div class="bg-white rounded-brand p-6 shadow-sm border border-neutral-100">
            <h3 class="text-lg font-bold">💳 동백전 카드 발급 안내</h3>
            <p class="text-sm text-neutral-600 mt-1 mb-4">모임 정산 · 리워드 혜택을 위해 카드를 발급하세요.</p>
            <button class="w-full py-2 rounded-xl bg-busan-blue text-white font-semibold hover:brightness-110 transition" onclick="showKioskLocationModal()">키오스크 위치 보기</button>
          </div>
        </div>
      </aside>
    </div>

    <!-- Rewards page (hidden) -->
    <div id="reward-page" class="hidden"></div>
  </main>

  <!-- Modals -->
  <!-- Login -->
  <div id="login-modal" class="modal fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4">
    <div class="bg-white rounded-2xl w-full max-w-sm p-6 shadow-2xl">
      <h3 class="text-2xl font-extrabold text-bnk-red">로그인</h3>
      <p class="text-neutral-600 mt-1 mb-5">커뮤니티 활동을 위해 계정을 만들어주세요.</p>
      <label class="block text-sm font-medium mb-1">이메일</label>
      <input type="email" class="w-full mb-3 p-3 rounded-xl border border-neutral-300 focus:ring-2 focus:ring-bnk-red/30 focus:border-bnk-red outline-none" placeholder="your@email.com"/>
      <label class="block text-sm font-medium mb-1">비밀번호</label>
      <input type="password" class="w-full mb-5 p-3 rounded-xl border border-neutral-300 focus:ring-2 focus:ring-bnk-red/30 focus:border-bnk-red outline-none" placeholder="••••••••"/>
      <button class="w-full py-3 rounded-xl bg-bnk-red text-white font-bold shadow-brand hover:bg-bnk-deep transition" onclick="mockLogin()">로그인 / 가입하기</button>
      <button class="w-full mt-3 text-sm text-neutral-600 hover:text-bnk-red" onclick="closeModal('login-modal')">나중에 할게요 (게스트)</button>
    </div>
  </div>

  <!-- Card linkage -->
  <div id="card-linkage-modal" class="modal fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4">
    <div class="bg-white rounded-2xl w-full max-w-md p-6 shadow-2xl">
      <h3 class="text-2xl font-extrabold text-bnk-red flex items-center"><span class="mr-2">💳</span>동백전 카드 연동 필수</h3>
      <p class="text-neutral-700 mt-2">모임 정산·리워드 적립은 <b>동백전 부산페이 선불카드</b> 연동 사용자에게 제공됩니다.</p>
      <ul class="list-disc list-inside text-sm text-neutral-600 mt-3 mb-5 space-y-1">
        <li>혜택: 스탬프 리워드 쿠폰, 모임 비용 자동 정산</li>
        <li>발급 장소: 김해공항 / 해운대 / 광안리 키오스크</li>
      </ul>
      <label class="block text-sm font-medium mb-1">카드 번호 (16자리)</label>
      <input type="text" class="w-full mb-3 p-3 rounded-xl border border-neutral-300 focus:ring-2 focus:ring-bnk-red/30 focus:border-bnk-red outline-none" placeholder="1234 5678 9012 3456"/>
      <label class="block text-sm font-medium mb-1">유효기간 / CVC</label>
      <input type="password" class="w-full mb-5 p-3 rounded-xl border border-neutral-300 focus:ring-2 focus:ring-bnk-red/30 focus:border-bnk-red outline-none" placeholder="MM/YY · CVC"/>
      <button class="w-full py-3 rounded-xl bg-bnk-red text-white font-bold shadow-brand hover:bg-bnk-deep transition" onclick="mockLinkCard()">카드 연동 완료</button>
      <div class="mt-4 flex items-center justify-between text-sm">
        <button class="text-busan-blue hover:underline" onclick="showKioskLocationModal(); closeModal('card-linkage-modal')">카드 발급 위치 보기</button>
        <button class="text-neutral-600 hover:text-bnk-red" onclick="closeModal('card-linkage-modal')">취소</button>
      </div>
    </div>
  </div>

  <!-- Kiosk map -->
  <div id="kiosk-location-modal" class="modal fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4">
    <div class="bg-white rounded-2xl w-full max-w-lg p-6 shadow-2xl">
      <h3 class="text-2xl font-extrabold text-busan-blue flex items-center"><span class="mr-2">🗺️</span>동백전 발급 키오스크 위치</h3>
      <p class="text-neutral-700 mt-2">주요 관광지에 배치된 디지털 플레이스에서 즉시 발급 가능합니다.</p>
      <div class="bg-neutral-100 h-48 rounded-xl grid place-items-center text-neutral-500 text-sm my-4">[지도 API 연동 영역: 현재 위치 기반 키오스크 표시]</div>
      <ul class="list-disc list-inside text-sm text-neutral-700 space-y-1 mb-6">
        <li><b>김해 국제공항</b>: 1층 도착 로비</li>
        <li><b>해운대 해수욕장</b>: 관광안내소 앞 (신규)</li>
        <li><b>광안리 해수욕장</b>: 민락수변공원 입구 (신규)</li>
      </ul>
      <button class="w-full py-3 rounded-xl bg-busan-blue text-white font-bold hover:brightness-110" onclick="closeModal('kiosk-location-modal')">확인</button>
    </div>
  </div>

  <!-- Footer -->
  <footer class="bg-[#0d1117] text-neutral-200 mt-12">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
      <div class="flex flex-col md:flex-row items-center md:items-start justify-between gap-6">
        <div>
          <div class="flex items-center gap-3">
            <div class="h-8 w-8 rounded-xl bg-gradient-to-br from-bnk-red to-bnk-deep text-white grid place-items-center">BNK</div>
            <span class="text-lg font-extrabold">Busan Connect</span>
          </div>
          <p class="text-sm text-neutral-400 mt-2">Connecting Global Travelers & Students in Busan</p>
        </div>
        <div class="flex items-center gap-6 text-sm">
          <a href="#" class="hover:text-white">개인정보처리방침</a>
          <a href="#" class="hover:text-white">이용약관</a>
          <a href="#" class="hover:text-white">문의하기</a>
        </div>
      </div>
      <div class="mt-6 border-t border-white/10 pt-4 text-xs text-neutral-400">© 2025 BNK BUSAN BANK · Busan Connect (Beta)</div>
    </div>
  </footer>

  <!-- State & Logic (kept from your original, polished) -->
  <script>
    let isLoggedIn = false;
    let isCardLinked = false;
    let stampCount = 5;

    const authButton = document.getElementById('auth-button');
    const profileAvatar = document.getElementById('profile-avatar');
    const rewardsNavBtn = document.getElementById('rewards-nav-btn');
    const mainContentFeed = document.getElementById('main-content-feed');
    const rewardPage = document.getElementById('reward-page');
    const mobileMenu = document.getElementById('mobile-menu');

    // 자동 모달 방지 플래그 (초기 로드 시 자동 오픈 금지)
    window.__ALLOW_AUTO_MODALS__ = false;

    function updateUIState(){
      if(isLoggedIn){
        authButton.classList.add('hidden');
        profileAvatar.classList.remove('hidden');
        profileAvatar.classList.add('flex');
      } else {
        authButton.classList.remove('hidden');
        profileAvatar.classList.add('hidden');
        profileAvatar.classList.remove('flex');
      }
      mainContentFeed.classList.remove('hidden');
      rewardPage.classList.add('hidden');
    }

    function closeModal(id){ document.getElementById(id).style.display = 'none'; }
    const BLOCKED_ON_HOME = new Set(['kiosk-location-modal','card-linkage-modal']);
    // userInitiated=true 이면 홈에서도 예외적으로 표시 허용
    function showModal(id, userInitiated=false){
      if (BLOCKED_ON_HOME.has(id) && !userInitiated) return; // 자동/비의도 호출은 차단
      document.getElementById(id).style.display = 'flex';
    }

    // 모든 모달 강제 비활성화 (안전장치)
    function hideAllModals(){
      document.querySelectorAll('.modal').forEach(m => { m.style.display = 'none'; });
    }

    function handleAuthClick(){
      if(!isLoggedIn){ showModal('login-modal'); }
      else { alert('로그아웃되었습니다.'); isLoggedIn=false; isCardLinked=false; updateUIState(); }
    }

    function mockLogin(){ isLoggedIn=true; closeModal('login-modal'); updateUIState(); alert('로그인 성공! (Mock)'); }
    function mockLinkCard(){ isCardLinked=true; closeModal('card-linkage-modal'); alert('동백전 카드 연동 성공! (Mock)'); updateRewardsPage(); handleRewardsClick(); }

    function handlePremiumFeatureClick(){
      if(!isLoggedIn){ showModal('login-modal'); return; }
      if(!isCardLinked){ showModal('card-linkage-modal', true); return; }
      alert('모임 주최 및 정산 페이지로 이동합니다. (Mock)');
    }

    // auto=true 일 때는 전역 플래그를 확인하여 자동 오픈을 차단
    function showKioskLocationModal(auto=false){
      if (auto && !window.__ALLOW_AUTO_MODALS__) return;
      closeModal('login-modal');
      closeModal('card-linkage-modal');
      // auto=false (사용자 클릭) → userInitiated=true 로 열기
      showModal('kiosk-location-modal', !auto);
    }

    function updateRewardsPage(){
      const requiredStamps = 10;
      const rewardAmount = 1000;
      const canRedeem = stampCount >= requiredStamps;

      let content = `
      <section class="bg-white rounded-brand p-8 shadow-sm border border-neutral-100">
        <h2 class="text-3xl font-extrabold text-bnk-red mb-6">🎁 나의 동백전 리워드</h2>`;

      if(isCardLinked){
        content += `
          <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8 text-center">
            <div class="bg-neutral-50 p-5 rounded-xl border border-neutral-200">
              <p class="text-sm text-neutral-500">현재 스탬프</p>
              <p class="text-4xl font-extrabold text-bnk-red mt-2">${stampCount}<span class="text-base text-neutral-500"> 개</span></p>
            </div>
            <div class="bg-neutral-50 p-5 rounded-xl border border-neutral-200">
              <p class="text-sm text-neutral-500">다음 목표</p>
              <p class="text-4xl font-extrabold text-bnk-ink mt-2">${requiredStamps}<span class="text-base text-neutral-500"> 개</span></p>
            </div>
            <div class="bg-neutral-50 p-5 rounded-xl border border-neutral-200">
              <p class="text-sm text-neutral-500">누적 리워드 금액</p>
              <p class="text-4xl font-extrabold text-accent-green mt-2">5,000<span class="text-base text-neutral-500"> 원</span></p>
            </div>
          </div>

          <h3 class="text-xl font-bold mb-3">쿠폰 교환</h3>
          <div class="p-5 rounded-xl border flex flex-col md:flex-row md:items-center md:justify-between gap-4 ${canRedeem? 'border-bnk-red bg-bnk-red/5':'border-neutral-200 bg-neutral-50'}">
            <div>
              <p class="text-lg font-semibold ${canRedeem? 'text-bnk-red':'text-bnk-ink'}">${requiredStamps} 스탬프 당 ${rewardAmount}원 쿠폰</p>
              <p class="text-sm text-neutral-600">고메부산 제휴처 방문 시 자동 적립됩니다.</p>
            </div>
            <button ${canRedeem? 'onclick="redeemCoupon()"':''} class="px-4 py-2 rounded-xl font-bold ${canRedeem? 'bg-bnk-red text-white hover:bg-bnk-deep shadow-brand':'bg-neutral-200 text-neutral-500 cursor-not-allowed'}">
              ${canRedeem? '쿠폰 교환하기' : `${requiredStamps - stampCount}개 남음`}
            </button>
          </div>

          <h3 class="text-xl font-bold mt-8 mb-3">적립 내역</h3>
          <ul class="space-y-3 text-sm">
            <li class="flex justify-between items-center border-b pb-2"><span>✅ 해운대 더베이 101 방문</span><span class="text-bnk-red font-bold">+1</span></li>
            <li class="flex justify-between items-center border-b pb-2"><span>✅ 흰여울 문화마을 방문</span><span class="text-bnk-red font-bold">+1</span></li>
            <li class="flex justify-between items-center border-b pb-2"><span>✅ 광안리 밀면 전문점 방문</span><span class="text-bnk-red font-bold">+1</span></li>
            <li class="flex justify-between items-center border-b pb-2"><span>✅ 태종대 유원지 방문</span><span class="text-bnk-red font-bold">+1</span></li>
            <li class="flex justify-between items-center border-b pb-2"><span>✅ 감천 문화마을 방문</span><span class="text-bnk-red font-bold">+1</span></li>
            <li class="flex justify-between items-center border-b pb-2 text-neutral-500"><span>⬜ 다음 목표: 국제시장 방문</span><span class="font-bold">+0</span></li>
          </ul>`;
      } else {
        content += `
          <div class="text-center p-10 bg-neutral-50 rounded-xl border-2 border-dashed border-bnk-red/40">
            <p class="text-xl font-semibold text-bnk-red mb-3">동백전 카드를 연동하세요</p>
            <p class="text-neutral-600 mb-6">스탬프 적립 및 쿠폰 혜택은 카드 등록 사용자에게 제공됩니다.</p>
            <button class="px-6 py-3 rounded-xl bg-bnk-red text-white font-bold shadow-brand hover:bg-bnk-deep" onclick="showModal('card-linkage-modal', true)">카드 연동하고 혜택 시작</button>
          </div>`;
      }

      content += '</section>';
      rewardPage.innerHTML = content;
    }

    function redeemCoupon(){
      if(stampCount >= 10){
        stampCount -= 10;
        alert(`축하합니다! 동백전 ${1000}원 쿠폰이 지급되었습니다. 잔여 스탬프: ${stampCount}개`);
        updateRewardsPage();
      } else { alert('스탬프가 부족합니다.'); }
    }

    function handleRewardsClick(){
      mainContentFeed.classList.add('hidden');
      rewardPage.classList.remove('hidden');
      updateRewardsPage();
      mobileMenu.classList.add('hidden');
    }

    document.addEventListener('DOMContentLoaded', () => {
      hideAllModals(); // 초기 로딩 시 자동 모달 방지
      updateUIState();
      rewardsNavBtn.addEventListener('click', handleRewardsClick);
      document.getElementById('mobile-menu-button').addEventListener('click', () => mobileMenu.classList.toggle('hidden'));
      updateRewardsPage();
    });
  </script>
</body>
</html>
